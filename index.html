<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Mis XV ¬∑ Mia</title>

<link href="https://fonts.googleapis.com/css2?family=Lobster&family=Montserrat:wght@300;400;500&display=swap" rel="stylesheet">

<style>
*{margin:0;padding:0;box-sizing:border-box}

body{
 background:#000;
 font-family:'Montserrat',sans-serif;
 display:flex;
 justify-content:center;
}

#story{
 width:100%;
 max-width:420px;
 background:radial-gradient(circle at top,#111 0%,#000 70%);
 color:#f5e7b2;
 text-align:center;
 position:relative;
 overflow:hidden;
}

/* INTRO */
#intro{
 position:fixed;
 inset:0;
 background:radial-gradient(circle,#111 0%,#000 70%);
 display:flex;
 flex-direction:column;
 justify-content:center;
 align-items:center;
 z-index:20;
 transition:opacity 1s ease;
}

#intro h1{
 font-family:'Lobster',cursive;
 color:#d4af37;
 font-size:48px;
 text-shadow:0 0 12px #d4af37;
}

#intro p{
 margin-top:20px;
 animation:arrow 1.6s infinite;
 opacity:.8;
}
#intro{ cursor:pointer; }

@keyframes arrow{
 0%{transform:translateY(0)}
 50%{transform:translateY(10px)}
 100%{transform:translateY(0)}
}

section{
 padding:80px 24px;
 opacity:0;
 transform:translateY(40px);
 transition:1s ease;
 position:relative;
 z-index:2;
}

section.visible{
 opacity:1;
 transform:translateY(0);
}

section + section{
 border-top:1px solid rgba(212,175,55,.15);
}

h1,h2{
 font-family:'Lobster',cursive;
 color:#d4af37;
 text-shadow:0 0 8px #f5e7b2,0 0 25px #d4af37;
 margin-bottom:15px;
}

p{font-size:15px;line-height:1.6}

.btn{
 display:inline-block;
 background:linear-gradient(135deg,#d4af37,#f5e7b2);
 padding:14px 34px;
 border-radius:30px;
 color:#000;
 text-decoration:none;
 margin-top:25px;
 border:none;
 cursor:pointer;
}

input,select{
 width:100%;
 max-width:260px;
 padding:11px;
 border-radius:12px;
 border:1px solid #d4af37;
 margin-bottom:15px;
}

canvas{
 position:absolute;
 top:0;left:0;
 width:100%;
 pointer-events:none;
 z-index:1;
}

/* Countdown */
#countdown{
 display:flex;
 justify-content:center;
 gap:14px;
 margin-top:30px;
}

.time{
 background:#111;
 border:1px solid #d4af37;
 border-radius:14px;
 padding:12px;
 min-width:65px;
}

.time span{
 font-size:22px;
 font-weight:700;
 display:block;
}

#thanks,#confirmed{
 display:none;
 margin-top:20px;
 font-weight:700;
 color:#d4af37;
}

#gallery{
 display:none;
 gap:12px;
 flex-wrap:wrap;
 justify-content:center;
 margin-top:20px;
}

#gallery img{
 width:120px;
 height:90px;
 object-fit:cover;
 border-radius:10px;
 border:1px solid #d4af37;
}

/* Music toggle */
#musicToggle{
 position:fixed;
 bottom:20px;
 right:20px;
 width:48px;
 height:48px;
 border-radius:50%;
 background:linear-gradient(135deg,#d4af37,#f5e7b2);
 border:2px solid #d4af37;
 cursor:pointer;
 z-index:30;
 display:flex;
 align-items:center;
 justify-content:center;
 font-size:22px;
 box-shadow:0 2px 12px rgba(212,175,55,.4);
 transition:transform .2s, opacity .3s;
}
#musicToggle:hover{transform:scale(1.08)}
#musicToggle.muted{opacity:.6}

#musicTip{
 display:none;
 position:fixed;
 bottom:75px;left:20px;right:20px;
 max-width:380px;margin:0 auto;
 background:rgba(0,0,0,.92);
 color:#f5e7b2;
 padding:12px 14px;
 border-radius:12px;
 font-size:13px;
 z-index:29;
 border:1px solid #d4af37;
 box-shadow:0 4px 20px rgba(0,0,0,.5);
}
#musicTip.show{display:block}
</style>
</head>

<body>

<audio id="bgMusic" loop preload="auto" playsinline>
 <source src="bella-y-bestia.mp3" type="audio/mpeg">
</audio>

<button id="musicToggle" class="muted" type="button" title="Reproducir / pausar m√∫sica" aria-label="M√∫sica de fondo">üéµ</button>
<div id="musicTip"></div>

<div id="intro">
 <h1>Mis XV ¬∑ Mia ‚ú®</h1>
 <p>Toc√° o desliz√° para entrar ‚Üì</p>
</div>

<div id="story">
<canvas id="confetti"></canvas>

<section>
 <h1>Mis XV</h1>
 <h2>Mia</h2>
 <p>Te espero para celebrar una noche inolvidable ‚ú®</p>

 <div id="countdown">
  <div class="time"><span id="d">0</span>D√≠as</div>
  <div class="time"><span id="h">0</span>Hs</div>
  <div class="time"><span id="m">0</span>Min</div>
  <div class="time"><span id="s">0</span>Seg</div>
 </div>
</section>

<section>
 <h2>üìÖ Fecha</h2>
 <p>19 de Junio de 2026</p>
 <p>21:00 hs</p>
</section>

<section>
 <h2>üëó Dress Code</h2>
 <p>Elegante</p>
</section>

<section>
 <h2>üìç Ubicaci√≥n</h2>
 <p>Hac√© click para ver c√≥mo llegar</p>
 <a class="btn" target="_blank"
 href="https://maps.google.com/?q=-34.946778,-57.992245">
 Ver en Google Maps
 </a>
</section>

<section>
 <h2>üé∂ Playlist colaborativa</h2>
 <p>Sum√° las canciones que no pueden faltar</p>
 <a class="btn" target="_blank"
 href="https://open.spotify.com/playlist/58lNbxVtEhSVgc7jgTtb4l">
 Agregar canciones
 </a>
</section>

<section>
 <h2>üìã Confirmaci√≥n</h2>

<form id="confirmForm"
 action="https://docs.google.com/forms/d/e/1FAIpQLSfcPkZ_08gWIRwh3XzJrUMHtoLBioMwCpQC62SRSa_rwlK0eQ/formResponse"
 method="POST"
 target="hidden_iframe"
 onsubmit="return saveConfirmation()">

<input id="guestName" name="entry.1824429782" placeholder="Nombre completo" required>

<select name="entry.408431185" required>
 <option value="">¬øAsist√≠s?</option>
 <option value="S√≠">S√≠</option>
 <option value="No">No</option>
</select>

<select name="entry.929339781" required>
 <option value="">Preferencia alimenticia</option>
 <option>Ninguna</option>
 <option>Vegana</option>
 <option>Vegetariana</option>
 <option>Cel√≠aca</option>
</select>

<button class="btn">Confirmar</button>
</form>

<iframe name="hidden_iframe" style="display:none"></iframe>
<div id="thanks">üíõ Gracias por confirmar üíõ</div>
<div id="confirmed"></div>
</section>

<section>
 <h2>üéÅ Regalo</h2>
 <p>Alias Mercado Pago</p>
 <p style="font-weight:700;font-size:18px">miavasquez.mp</p>
</section>

<section>
 <h2>üì∏ Galer√≠a</h2>
 <p id="galleryText">Las fotos estar√°n disponibles despu√©s del evento</p>
 <div id="gallery">
  <img src="https://i.imgur.com/1.jpg">
  <img src="https://i.imgur.com/2.jpg">
  <img src="https://i.imgur.com/3.jpg">
 </div>
</section>

</div>

<script>
// MUSIC
const bgMusic=document.getElementById("bgMusic");
const musicToggle=document.getElementById("musicToggle");
const intro=document.getElementById("intro");
const musicTip=document.getElementById("musicTip");
let musicStarted=false;
let entered=false;

function showMusicTip(msg){
 musicTip.innerHTML=msg;
 musicTip.classList.add("show");
}

bgMusic.addEventListener("error",()=>{
 showMusicTip("No se pudo cargar la m√∫sica. Abr√≠ la p√°gina con <strong>Live Server</strong> o <strong>npx serve</strong> (misma carpeta que el HTML), no con doble clic.");
});

if(window.location.protocol==="file:"){
 showMusicTip("Para que suene la m√∫sica, abr√≠ la p√°gina con <strong>Live Server</strong> o <strong>npx serve</strong> en esta carpeta, no con doble clic en el HTML.");
}

function startMusic(){
 if(musicStarted) return;
 bgMusic.play().then(()=>{
  musicStarted=true;
  musicToggle.classList.remove("muted");
  musicToggle.textContent="üîä";
 }).catch(()=>{});
}

function toggleMusic(){
 if(bgMusic.paused){
  bgMusic.play().catch(()=>{});
  musicToggle.classList.remove("muted");
  musicToggle.textContent="üîä";
 }else{
  bgMusic.pause();
  musicToggle.classList.add("muted");
  musicToggle.textContent="üîá";
 }
}

musicToggle.addEventListener("click",()=>{
 if(!musicStarted){ startMusic(); return; }
 toggleMusic();
});

function enter(){
 if(entered) return;
 entered=true;
 startMusic();
 intro.style.opacity=0;
 setTimeout(()=>{ intro.style.display="none"; },1000);
}

// Toc√° o clic en la intro = gesto directo ‚Üí la m√∫sica suena seguro
intro.addEventListener("click",enter);
intro.addEventListener("touchstart",enter,{passive:true});

// Deslizar tambi√©n cierra la intro e intenta m√∫sica
window.addEventListener("scroll",enter,{once:true});

// SCROLL
const observer=new IntersectionObserver(e=>{
 e.forEach(i=>i.isIntersecting&&i.target.classList.add("visible"));
},{threshold:.2});
document.querySelectorAll("section").forEach(s=>observer.observe(s));

// COUNTDOWN
const eventDate=new Date("2026-06-19T21:00:00").getTime();
setInterval(()=>{
 const t=eventDate-Date.now();
 if(t>0){
  d.textContent=Math.floor(t/86400000);
  h.textContent=Math.floor(t/3600000)%24;
  m.textContent=Math.floor(t/60000)%60;
  s.textContent=Math.floor(t/1000)%60;
 }else{
  galleryText.textContent="¬°Las fotos ya est√°n disponibles! üì∏‚ú®";
  gallery.style.display="flex";
 }
},1000);

// CONFIRM
function saveConfirmation(){
 const name=guestName.value;
 localStorage.setItem("xvConfirmed",name);

 setTimeout(()=>{
  confirmForm.style.display="none";
  thanks.style.display="block";
  confirmed.style.display="block";
  confirmed.innerHTML=`‚ú® Ya confirmaste, <strong>${name}</strong> ‚ú®`;
 },600);

 return true; // üî• ENV√çA A GOOGLE FORMS
}

// AUTO LOAD
const saved=localStorage.getItem("xvConfirmed");
if(saved){
 confirmForm.style.display="none";
 confirmed.style.display="block";
 confirmed.innerHTML=`‚ú® Ya confirmaste, <strong>${saved}</strong> ‚ú®`;
}

// CONFETTI
const c=document.getElementById("confetti"),ctx=c.getContext("2d");
function resize(){c.width=story.offsetWidth;c.height=story.scrollHeight}
resize();window.addEventListener("resize",resize);

let p=[];
for(let i=0;i<160;i++)p.push({x:Math.random()*c.width,y:Math.random()*c.height,r:2+Math.random()*3,s:.5+Math.random()*1.5});
(function anim(){
 ctx.clearRect(0,0,c.width,c.height);
 p.forEach(a=>{
  ctx.beginPath();
  ctx.arc(a.x,a.y,a.r,0,Math.PI*2);
  ctx.fillStyle="#d4af37";
  ctx.shadowBlur=10;
  ctx.shadowColor="#d4af37";
  ctx.fill();
  a.y+=a.s;if(a.y>c.height)a.y=0;
 });
 requestAnimationFrame(anim);
})();
</script>

</body>
</html>

